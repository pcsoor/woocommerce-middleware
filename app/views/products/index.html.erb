<% current_page = (params[:page] || 1).to_i %>
<% per_page = (params[:per_page] || 25).to_i %>

<h1 class="text-2xl font-medium mb-3 text-neutral-600">Product List</h1>

<% if @products.any? %>
  <%= form_with url: new_merge_simple_product_path, method: :get, local: true do |form| %>
    <%= render "products_table" %>

    <div style="margin-top: 10px;">
      <%= submit_tag "Merge Selected into Variable Product", class: "bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" %>
    </div>

    <div class="flex space-x-4 mt-4">
      <% if current_page > 1 %>
        <%= link_to "Previous Page", products_path(page: current_page - 1, per_page: per_page), class: "btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded" %>
      <% end %>

      <%= link_to "Next Page", products_path(page: current_page + 1, per_page: per_page), class: "btn bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" %>
    </div>
  <% end %>

<% else %>
  <p>No products found or unable to fetch products from WooCommerce.</p>
<% end %>
